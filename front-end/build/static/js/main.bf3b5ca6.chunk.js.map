{"version":3,"sources":["Context.js","Oups.js","Footer.js","Header.js","Channels.js","channel/Form.js","channel/List.js","Channel.js","icons/channel.svg","icons/friends.svg","icons/settings.svg","Welcome.js","Main.js","Login.js","App.js","serviceWorker.js","index.js"],"names":["Context","React","createContext","Provider","children","useCookies","cookies","setCookie","removeCookie","useState","oauth","setOauth","drawerVisible","setDrawerVisible","channels","setChannels","currentChannel","setCurrentChannel","value","payload","JSON","parse","Buffer","from","id_token","split","toString","email","channelId","channel","find","id","Oups","styles","root","background","useTheme","palette","default","overflow","flex","display","justifyContent","alignItems","css","footer","height","backgroundColor","flexShrink","Footer","style","Header","drawerToggleListener","theme","header","padding","spacing","headerLogIn","headerLogOut","menu","breakpoints","up","useContext","IconButton","color","onClick","e","Link","stopPropagation","whiteSpace","Channels","naviate","useNavigate","useEffect","fetch","a","axios","get","headers","access_token","data","console","error","to","component","RouterLink","map","i","href","preventDefault","name","Form","addMessage","content","setContent","borderColor","mode","form","borderTop","marginRight","send","useStyles","onSubmit","post","author","message","noValidate","TextField","label","multiline","maxRows","onChange","target","variant","Button","endIcon","dayjs","extend","calendar","updateLocale","sameElse","forwardRef","ref","messages","onScrollDown","position","fabWrapper","right","top","width","fab","useImperativeHandle","scroll","rootEl","useRef","scrollEl","current","scrollIntoView","throttleTimeout","useLayoutEffect","rootNode","handleScroll","setTimeout","scrollTop","offsetHeight","scrollHeight","addEventListener","removeEventListener","unified","use","markdown","remark2rehype","html","processSync","creation","dangerouslySetInnerHTML","__html","Channel","navigate","useParams","flexDirection","overflowX","fabDisabled","listRef","setMessages","scrollDown","setScrollDown","List","Fab","_path","_path2","_path3","_path4","_path5","_path6","_path7","_path8","_path9","_rect","_excluded","_extends","Object","assign","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgChannel","_ref","svgRef","title","titleId","props","fill","xmlns","viewBox","x","y","undefined","d","ForwardRef","SvgFriends","xmlnsXlink","enableBackground","xmlSpace","_defs","_g","SvgSettings","shapeRendering","textRendering","imageRendering","fillRule","clipRule","className","Welcome","card","textAlign","icon","Grid","container","direction","justify","item","xs","Typography","Main","drawer","isDrawerVisible","useMediaQuery","Drawer","PaperProps","BackdropProps","ModalProps","open","path","element","base64URLEncode","str","replace","margin","marginLeft","border","marginBottom","Redirect","config","codeVerifier","buffer","code_challenge","crypto","createHash","update","digest","url","authorization_endpoint","client_id","scope","redirect_uri","join","window","location","Tokens","id_payload","atob","LoadToken","code","token_endpoint","qs","stringify","grant_type","code_verifier","Login","onUser","URLSearchParams","search","log","randomBytes","boxSizing","App","useLocation","drawerMobileVisible","setDrawerMobileVisible","gochannels","pathname","state","gohome","exact","Boolean","hostname","match","createTheme","ReactDOM","render","StrictMode","CookiesProvider","ThemeProvider","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.bf3b5ca6.chunk.js","sourcesContent":["\r\nimport React, {useState} from 'react'\r\nimport { useCookies } from 'react-cookie'\r\n\r\nconst Context = React.createContext()\r\n\r\nexport default Context\r\n\r\nexport const Provider = ({\r\n  children\r\n}) => {\r\n  const [cookies, setCookie, removeCookie] = useCookies([])\r\n  const [oauth, setOauth] = useState(cookies.oauth)\r\n  const [drawerVisible, setDrawerVisible] = useState(false)\r\n  const [channels, setChannels] = useState([])\r\n  const [currentChannel, setCurrentChannel] = useState(null)\r\n  return (\r\n    <Context.Provider value={{\r\n      oauth: oauth,\r\n      setOauth: (oauth) => {\r\n        if(oauth){\r\n          const payload = JSON.parse(\r\n            Buffer.from(\r\n              oauth.id_token.split('.')[1], 'base64'\r\n            ).toString('utf-8')\r\n          )\r\n          oauth.email = payload.email\r\n          setCookie('oauth', oauth)\r\n        }else{\r\n          setCurrentChannel(null)\r\n          setChannels([])\r\n          removeCookie('oauth')\r\n        }\r\n        setOauth(oauth)\r\n      },\r\n      channels: channels,\r\n      drawerVisible: drawerVisible,\r\n      setDrawerVisible: setDrawerVisible,\r\n      setChannels: setChannels,\r\n      currentChannel: currentChannel,\r\n      setCurrentChannel: (channelId) => {\r\n        const channel = channels.find( channel => channel.id === channelId)\r\n        setCurrentChannel(channel)\r\n      },\r\n    }}>{children}</Context.Provider>\r\n  )\r\n}\r\n","\r\n/** @jsxImportSource @emotion/react */\r\n// Layout\r\nimport { useTheme } from '@mui/styles';\r\n\r\nconst useStyles = (theme) => ({\r\n  root: {\r\n    background: theme.palette.background.default,\r\n    overflow: 'hidden',\r\n    flex: '1 1 auto',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n})\r\n\r\nexport default function Oups() {\r\n  const styles = useStyles(useTheme())\r\n  return (\r\n    <main css={styles.root}>\r\n      <div>\r\n        An unexpected error occured, it is probably not your fault. Sorry.\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n","\r\n/** @jsxImportSource @emotion/react */\r\n\r\nconst styles = {\r\n  footer: {\r\n    height: '30px',\r\n    backgroundColor: 'rgba(255,255,255,.3)',\r\n    flexShrink: 0,\r\n  },\r\n}\r\n\r\nexport default function Footer() {\r\n  return (\r\n    <footer style={styles.footer}>\r\n      footer\r\n    </footer>\r\n  );\r\n}\r\n","\r\n/** @jsxImportSource @emotion/react */\r\nimport { useContext } from 'react';\r\n// Layout\r\nimport { useTheme } from '@mui/styles';\r\nimport { IconButton, Link } from '@mui/material';\r\nimport MenuIcon from '@mui/icons-material/Menu';\r\nimport Context from './Context';\r\n\r\nconst useStyles = (theme) => ({\r\n  header: {\r\n    padding: theme.spacing(1),\r\n    backgroundColor: 'rgba(255,255,255,.3)',\r\n    flexShrink: 0,\r\n  },\r\n  headerLogIn: {\r\n    backgroundColor: 'red',\r\n  },\r\n  headerLogOut: {\r\n    backgroundColor: 'blue',\r\n  },\r\n  menu: {\r\n    [theme.breakpoints.up('sm')]: {\r\n      display: 'none !important',\r\n    },\r\n  }\r\n})\r\n\r\nexport default function Header({\r\n  drawerToggleListener\r\n}) {\r\n  const styles = useStyles(useTheme())\r\n  const {\r\n    oauth, setOauth,\r\n    drawerVisible, setDrawerVisible\r\n  } = useContext(Context)\r\n  const drawerToggle = (e) => {\r\n    setDrawerVisible(!drawerVisible)\r\n  }\r\n  const onClickLogout = (e) => {\r\n    e.stopPropagation()\r\n    setOauth(null)\r\n  }\r\n  return (\r\n    <header css={styles.header}>\r\n      <IconButton\r\n        color=\"inherit\"\r\n        aria-label=\"open drawer\"\r\n        onClick={drawerToggle}\r\n        css={styles.menu}\r\n      >\r\n        <MenuIcon />\r\n      </IconButton>\r\n      Header\r\n      {\r\n        oauth ?\r\n          <span>\r\n            {oauth.email}\r\n            <Link onClick={onClickLogout}>logout</Link>\r\n          </span>\r\n        :\r\n          <span>new user</span>\r\n      }\r\n      \r\n    </header>\r\n  );\r\n}\r\n","\r\n/** @jsxImportSource @emotion/react */\r\nimport {useContext, useEffect} from 'react';\r\nimport axios from 'axios';\r\n// Layout\r\nimport {Link} from '@mui/material';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\n// Local\r\nimport Context from './Context'\r\nimport {useNavigate} from 'react-router-dom'\r\n\r\nconst styles = {\r\n  root: {\r\n    '& a': {\r\n      padding: '.2rem .5rem',\r\n      whiteSpace: 'nowrap', \r\n    }\r\n  },\r\n}\r\n\r\nexport default function Channels() {\r\n  const {\r\n    oauth,\r\n    channels, setChannels\r\n  } = useContext(Context)\r\n  const naviate = useNavigate();\r\n  useEffect( () => {\r\n    const fetch = async () => {\r\n      try{\r\n        const {data: channels} = await axios.get('http://localhost:3001/channels', {\r\n          headers: {\r\n            'Authorization': `Bearer ${oauth.access_token}`\r\n          }\r\n        })\r\n        setChannels(channels)\r\n      }catch(err){\r\n        console.error(err)\r\n      }\r\n    }\r\n    fetch()\r\n  }, [oauth, setChannels])\r\n  return (\r\n    <ul css={styles.root}>\r\n      <li css={styles.channel}>\r\n        <Link to=\"/channels\" component={RouterLink}>Welcome</Link>\r\n      </li>\r\n      { channels.map( (channel, i) => (\r\n        <li key={i} css={styles.channel}>\r\n          <Link\r\n            href={`/channels/${channel.id}`}\r\n            onClick={ (e) => {\r\n              e.preventDefault()\r\n              naviate(`/channels/${channel.id}`)\r\n            }}\r\n          >\r\n            {channel.name}\r\n          </Link>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n","\r\n/** @jsxImportSource @emotion/react */\r\nimport { useState } from 'react'\r\nimport axios from 'axios';\r\n// Layout\r\nimport { Button, TextField } from '@mui/material';\r\nimport SendIcon from '@mui/icons-material/Send';\r\nimport { useTheme } from '@mui/styles';\r\n\r\nconst useStyles = (theme) => {\r\n  // See https://github.com/mui-org/material-ui/blob/next/packages/material-ui/src/OutlinedInput/OutlinedInput.js\r\n  const borderColor = theme.palette.mode === 'light' ? 'rgba(0, 0, 0, 0.23)' : 'rgba(255, 255, 255, 0.23)';\r\n  return {\r\n    form: {\r\n      borderTop: `2px solid ${borderColor}`,\r\n      padding: '.5rem',\r\n      display: 'flex',\r\n    },\r\n    content: {\r\n      flex: '1 1 auto',\r\n      '&.MuiTextField-root': {\r\n        marginRight: theme.spacing(1),\r\n      },\r\n    },\r\n    send: {\r\n    },\r\n  }\r\n}\r\n\r\nexport default function Form({\r\n  addMessage,\r\n  channel,\r\n}) {\r\n  const [content, setContent] = useState('')\r\n  const styles = useStyles(useTheme())\r\n  const onSubmit = async () => {\r\n    const {data: message} = await axios.post(\r\n      `http://localhost:3001/channels/${channel.id}/messages`\r\n    , {\r\n      content: content,\r\n      author: 'david',\r\n    })\r\n    addMessage(message)\r\n    setContent('')\r\n  }\r\n  const handleChange = (e) => {\r\n    setContent(e.target.value)\r\n  }\r\n  return (\r\n    <form css={styles.form} onSubmit={onSubmit} noValidate>\r\n      <TextField\r\n        id=\"outlined-multiline-flexible\"\r\n        label=\"Message\"\r\n        multiline\r\n        maxRows={4}\r\n        value={content}\r\n        onChange={handleChange}\r\n        variant=\"outlined\"\r\n        css={styles.content}\r\n      />\r\n      <div>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          css={styles.send}\r\n          endIcon={<SendIcon />}\r\n          onClick={onSubmit}\r\n        >\r\n          Send\r\n        </Button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n","\r\n/** @jsxImportSource @emotion/react */\r\nimport {forwardRef, useImperativeHandle, useLayoutEffect, useRef} from 'react'\r\n// Layout\r\nimport { useTheme } from '@mui/styles';\r\n// Markdown\r\nimport { unified } from 'unified'\r\nimport markdown from 'remark-parse'\r\nimport remark2rehype from 'remark-rehype'\r\nimport html from 'rehype-stringify'\r\n// Time\r\nimport dayjs from 'dayjs'\r\nimport calendar from 'dayjs/plugin/calendar'\r\nimport updateLocale from 'dayjs/plugin/updateLocale'\r\ndayjs.extend(calendar)\r\ndayjs.extend(updateLocale)\r\ndayjs.updateLocale('en', {\r\n  calendar: {\r\n    sameElse: 'DD/MM/YYYY hh:mm A'\r\n  }\r\n})\r\n\r\nconst useStyles = (theme) => ({\r\n  root: {\r\n    position: 'relative',\r\n    flex: '1 1 auto',\r\n    overflow: 'auto',\r\n    '& ul': {\r\n      'margin': 0,\r\n      'padding': 0,\r\n      'textIndent': 0,\r\n      'listStyleType': 0,\r\n    },\r\n  },\r\n  message: {\r\n    padding: '.2rem .5rem',\r\n    ':hover': {\r\n      backgroundColor: 'rgba(255,255,255,.05)',\r\n    },\r\n  },\r\n  fabWrapper: {\r\n    position: 'absolute',\r\n    right: 0,\r\n    top: 0,\r\n    width: '50px',\r\n  },\r\n  fab: {\r\n    position: 'fixed !important',\r\n    top: 0,\r\n    width: '50px',\r\n  },\r\n})\r\n\r\nexport default forwardRef(({\r\n  channel,\r\n  messages,\r\n  onScrollDown,\r\n}, ref) => {\r\n  const styles = useStyles(useTheme())\r\n  // Expose the `scroll` action\r\n  useImperativeHandle(ref, () => ({\r\n    scroll: scroll\r\n  }));\r\n  const rootEl = useRef(null)\r\n  const scrollEl = useRef(null)\r\n  const scroll = () => {\r\n    scrollEl.current.scrollIntoView()\r\n  }\r\n  // See https://dev.to/n8tb1t/tracking-scroll-position-with-react-hooks-3bbj\r\n  const throttleTimeout = useRef(null) // react-hooks/exhaustive-deps\r\n  useLayoutEffect( () => {\r\n    const rootNode = rootEl.current // react-hooks/exhaustive-deps\r\n    const handleScroll = () => {\r\n      if (throttleTimeout.current === null) {\r\n        throttleTimeout.current = setTimeout(() => {\r\n          throttleTimeout.current = null\r\n          const {scrollTop, offsetHeight, scrollHeight} = rootNode // react-hooks/exhaustive-deps\r\n          onScrollDown(scrollTop + offsetHeight < scrollHeight)\r\n        }, 200)\r\n      }\r\n    }\r\n    handleScroll()\r\n    rootNode.addEventListener('scroll', handleScroll)\r\n    return () => rootNode.removeEventListener('scroll', handleScroll)\r\n  })\r\n  return (\r\n    <div css={styles.root} ref={rootEl}>\r\n      <h1>Messages for {channel.name}</h1>\r\n      <ul>\r\n        { messages.map( (message, i) => {\r\n            const {value} = unified()\r\n            .use(markdown)\r\n            .use(remark2rehype)\r\n            .use(html)\r\n            .processSync(message.content);\r\n            return (\r\n              <li key={i} css={styles.message}>\r\n                <p>\r\n                  <span>{message.author}</span>\r\n                  {' - '}\r\n                  <span>{dayjs().calendar(message.creation)}</span>\r\n                </p>\r\n                <div dangerouslySetInnerHTML={{__html: value}}>\r\n                </div>\r\n              </li>\r\n            )\r\n        })}\r\n      </ul>\r\n      <div ref={scrollEl} />\r\n    </div>\r\n  )\r\n})\r\n","\r\n/** @jsxImportSource @emotion/react */\r\nimport {useContext, useRef, useState, useEffect} from 'react';\r\nimport axios from 'axios';\r\n// Layout\r\nimport { useTheme } from '@mui/styles';\r\nimport {Fab} from '@mui/material';\r\nimport ArrowDropDownIcon from '@mui/icons-material/ArrowDropDown';\r\n// Local\r\nimport Form from './channel/Form'\r\nimport List from './channel/List'\r\nimport Context from './Context'\r\nimport { useNavigate, useParams } from 'react-router-dom'\r\n\r\nconst useStyles = (theme) => ({\r\n  root: {\r\n    height: '100%',\r\n    flex: '1 1 auto',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    position: 'relative',\r\n    overflowX: 'auto',\r\n  },\r\n  fab: {\r\n    position: 'absolute !important',\r\n    top: theme.spacing(2),\r\n    right: theme.spacing(2),\r\n  },\r\n  fabDisabled: {\r\n    display: 'none !important',\r\n  }\r\n})\r\n\r\nexport default function Channel() {\r\n  const navigate = useNavigate()\r\n  const { id } = useParams()\r\n  const {channels, oauth} = useContext(Context)\r\n  const channel = channels.find( channel => channel.id === id)\r\n  const styles = useStyles(useTheme())\r\n  const listRef = useRef()\r\n  const [messages, setMessages] = useState([])\r\n  const [scrollDown, setScrollDown] = useState(false)\r\n  const addMessage = (message) => {\r\n    setMessages([...messages, message])\r\n  }\r\n  useEffect( () => {\r\n    const fetch = async () => {\r\n      try{\r\n        const {data: messages} = await axios.get(`http://localhost:3001/channels/${id}/messages`, {\r\n          headers: {\r\n            // TODO: secure the request\r\n          }\r\n        })\r\n        setMessages(messages)\r\n        if(listRef.current){\r\n          listRef.current.scroll()\r\n        }\r\n      }catch(err){\r\n        navigate('/oups')\r\n      }\r\n    }\r\n    fetch()\r\n  }, [id, oauth, navigate])\r\n  const onScrollDown = (scrollDown) => {\r\n    setScrollDown(scrollDown)\r\n  }\r\n  const onClickScroll = () => {\r\n    listRef.current.scroll()\r\n  }\r\n  // On refresh, context.channel is not yet initialized\r\n  if(!channel){\r\n    return (<div>loading</div>)\r\n  }\r\n  return (\r\n    <div css={styles.root}>\r\n      <List\r\n        channel={channel}\r\n        messages={messages}\r\n        onScrollDown={onScrollDown}\r\n        ref={listRef}\r\n      />\r\n      <Form addMessage={addMessage} channel={channel} />\r\n      <Fab\r\n        color=\"primary\"\r\n        aria-label=\"Latest messages\"\r\n        css={[styles.fab, scrollDown || styles.fabDisabled]}\r\n        onClick={onClickScroll}\r\n      >\r\n        <ArrowDropDownIcon />\r\n      </Fab>\r\n    </div>\r\n  );\r\n}\r\n","var _path, _path2, _path3, _path4, _path5, _path6, _path7, _path8, _path9, _rect;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgChannel(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    height: \"100px\",\n    width: \"100px\",\n    fill: \"#000000\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"data-name\": \"Layer 1\",\n    viewBox: \"0 0 100 100\",\n    x: \"0px\",\n    y: \"0px\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"74 all\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M36.39,39.39V60.61a3,3,0,0,0,3,3H60.61a3,3,0,0,0,3-3V39.39a3,3,0,0,0-3-3H39.39A3,3,0,0,0,36.39,39.39Zm6,3H57.61V57.61H42.39Z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M53,28.71V19.42a9.46,9.46,0,1,0-6,0v9.29ZM50,7a3.46,3.46,0,1,1-3.46,3.46A3.46,3.46,0,0,1,50,7Z\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M47,71.29v9.29a9.46,9.46,0,1,0,6,0V71.29ZM50,93a3.46,3.46,0,1,1,3.46-3.46A3.46,3.46,0,0,1,50,93Z\"\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M67.18,37.07l6.57-6.57a9.46,9.46,0,1,0-4.24-4.24l-6.57,6.57Zm8.34-17.47a3.46,3.46,0,1,1,0,4.89A3.45,3.45,0,0,1,75.52,19.59Z\"\n  })), _path5 || (_path5 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M32.82,62.93,26.26,69.5a9.44,9.44,0,0,0-10.9,1.77h0A9.46,9.46,0,1,0,30.5,73.74l6.57-6.57ZM24.48,80.41a3.46,3.46,0,1,1-4.89-4.89h0a3.46,3.46,0,0,1,4.89,4.89Z\"\n  })), _path6 || (_path6 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M84.65,71.27A9.44,9.44,0,0,0,73.74,69.5l-6.57-6.57-4.24,4.24,6.57,6.57a9.47,9.47,0,0,0,1.77,10.9h0A9.46,9.46,0,0,0,84.65,71.27Zm-4.24,9.13a3.46,3.46,0,0,1-4.89-4.89,3.54,3.54,0,0,1,4.89,0A3.46,3.46,0,0,1,80.41,80.41Z\"\n  })), _path7 || (_path7 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M28.73,15.35A9.46,9.46,0,1,0,26.25,30.5l6.57,6.57,4.24-4.24L30.5,26.26a9.44,9.44,0,0,0-1.77-10.91Zm-9.13,9.13a3.46,3.46,0,0,1,4.89-4.89h0a3.46,3.46,0,1,1-4.89,4.89Z\"\n  })), _path8 || (_path8 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M89.54,40.54a9.47,9.47,0,0,0-9,6.46H71.29v6h9.29a9.45,9.45,0,1,0,9-12.46Zm0,12.92A3.46,3.46,0,1,1,93,50,3.46,3.46,0,0,1,89.54,53.46Z\"\n  })), _path9 || (_path9 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1,50a9.45,9.45,0,0,0,18.42,3h9.29V47H19.42A9.45,9.45,0,0,0,1,50Zm12.92,0a3.46,3.46,0,1,1-3.46-3.46A3.46,3.46,0,0,1,13.91,50Z\"\n  })), _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    x: 45.75,\n    y: 47,\n    width: 8.5,\n    height: 6\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgChannel);\nexport default __webpack_public_path__ + \"static/media/channel.307b83cf.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2, _path3;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgFriends(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    height: \"100px\",\n    width: \"100px\",\n    fill: \"#000000\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 90 90\",\n    style: {\n      enableBackground: \"new 0 0 90 90\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M22.3,64.2c0-6.9,3.2-11.7,9.6-14.4c-0.5-0.8-0.9-1.6-1.3-2.5c-0.7-0.3-1.3-0.5-1.9-0.6v-1.4c0.5-0.6,0.9-1.3,1.2-2  c0-0.8,0.1-1.5,0.3-2.3l1.9-8.2c0,0,0-0.1,0-0.1c0-0.1,0.1-0.3,0.1-0.4c0.7-4,0.3-6.9-1-8.6c-0.5-0.7-1.3-1.2-2.1-1.4  c-0.7-1.1-1.7-2-2.8-2.6c-1.8-1-3.8-1.5-5.9-1.3c-0.8,0-1.6,0.2-2.4,0.4c-0.9,0.3-1.8,0.8-2.6,1.3c-1,0.6-1.8,1.4-2.6,2.2  c-1.4,1.4-2.4,3.1-2.9,5c-0.4,1.5-0.4,3.1,0,4.7l0,0.2c0,0.1,0.1,0.3,0.1,0.5c-1.1,1.5-0.7,3.6-0.3,5c0.2,0.8,0.7,2.5,1.7,3.5  c0.4,1.4,1.1,2.8,2,3.9v1.4c-4,0.9-13.1,5.5-13.1,12.8c0,3.1,5.5,5.8,13.2,6.9c2.2,0.3,4.4,0.4,6.6,0.4l1.9,0c0.3,0,0.6,0,0.9,0  C22.6,66,22.3,65.1,22.3,64.2z M19.7,53.5l-3.1-3.3v-5.7c-1.4-1.4-2.2-3.1-2.4-4.6c0-0.2-0.2-0.4-0.4-0.4c0,0-0.5-0.1-1.1-2.4  c-0.5-1.8-0.2-2.3-0.2-2.5c0.1-0.1,0.2-0.1,0.3-0.1h0.1c0.1,0,0.2,0,0.3-0.1c0.1-0.1,0.2-0.2,0.2-0.3c0,0,0.3-3.8,2.5-5.1  c1.1-0.7,2.5-0.6,4.1,0.1c3.6,1.5,6.2,1.4,7.8,1.1c1.6,1.3,1.1,3.3,1,3.7v0c-0.1,0.2,0,0.3,0.1,0.5c0.1,0.1,0.3,0.2,0.4,0.2  c0.2,0,0.3,0,0.4,0.1c0.1,0.1,0.4,0.7-0.2,2.5c-0.7,2.3-1.2,2.4-1.2,2.4c-0.2,0-0.4,0.2-0.4,0.4c-0.2,1.5-1.1,3.3-2.4,4.6v5.7  l-3.1,3.3C21.7,54.3,20.4,54.3,19.7,53.5z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M76.6,46.7v-1.4c0.9-1.2,1.5-2.5,2-3.9c1-1.1,1.5-2.7,1.7-3.5c0.4-1.4,0.8-3.5-0.3-5.1c0-0.1,0.1-0.3,0.1-0.4  c0.7-4,0.3-6.9-1-8.6c-0.5-0.7-1.3-1.2-2.1-1.4c-0.7-1.1-1.7-2-2.8-2.6c-1.8-1-3.8-1.5-5.9-1.3c-0.8,0-1.6,0.2-2.4,0.4  c-0.9,0.3-1.8,0.8-2.6,1.3c-1,0.6-1.8,1.4-2.6,2.2c-1.4,1.4-2.4,3.1-2.9,5c-0.4,1.5-0.4,3.1,0,4.7l0,0.1l2.1,8.8  c0.2,0.8,0.3,1.6,0.3,2.4c0.3,0.7,0.7,1.3,1.2,1.9v1.4c-0.5,0.1-1.2,0.3-1.8,0.6c-0.3,0.9-0.8,1.8-1.3,2.6c6.3,2.8,9.6,7.7,9.6,14.3  c0,0.9-0.3,1.8-0.7,2.6c0.4,0,0.7,0,1.1,0l1.9,0c2.2,0,4.4-0.1,6.6-0.4c7.7-1.1,13.1-3.7,13.1-6.8C89.7,52.2,80.6,47.6,76.6,46.7z   M76.3,39.4c-0.2,0-0.4,0.2-0.4,0.4c-0.2,1.5-1.1,3.3-2.4,4.6v5c0,2.5-2,4.5-4.5,4.5c-2.5,0-4.5-2-4.5-4.5v-5  c-1.4-1.4-2.2-3.1-2.4-4.6c0-0.2-0.2-0.4-0.4-0.4c0,0-0.5-0.1-1.1-2.4c-0.5-1.8-0.2-2.3-0.2-2.5c0.1-0.1,0.2-0.1,0.3-0.1h0.1  c0.1,0,0.2,0,0.3-0.1c0.1-0.1,0.2-0.2,0.2-0.3c0,0,0.3-3.8,2.5-5.1c1.1-0.7,2.5-0.6,4.1,0.1c3.6,1.5,6.2,1.4,7.8,1.1  c1.6,1.3,1.1,3.3,1,3.7v0c-0.1,0.2,0,0.3,0.1,0.5c0.1,0.1,0.3,0.2,0.4,0.2c0.2,0,0.3,0,0.4,0.1c0.1,0.1,0.4,0.7-0.2,2.5  C76.8,39.3,76.3,39.4,76.3,39.4z\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M54.7,50.7c2.7-2.2,4-5.8,3.2-9.2l-2.1-9.1c-1.2-6-7.1-9.8-13-8.5c-4.3,0.9-7.6,4.2-8.5,8.5l-2.1,9.1  c-0.8,3.4,0.4,7,3.1,9.2c-4.4,1.3-11,4.3-11,13.5c0,4.1,9.3,7.4,20.8,7.4s20.8-3.3,20.8-7.4C65.8,55.3,59.2,52,54.7,50.7z   M38.3,35.6C38.4,35.6,38.4,35.6,38.3,35.6c1.7,0.1,5-0.2,8.7-3.5c0.3-0.3,0.8-0.2,1.1,0.1c0,0,0.1,0.1,0.1,0.1  c0.9,1.4,2.2,2.6,3.7,3.3c0.3,0.2,0.5,0.5,0.5,0.8l-0.1,4.1c-0.1,2.5-1.2,4.8-3.1,6.4c-0.1,0.1-0.2,0.3-0.2,0.4v3.3  c0,0.6,0.4,1.2,0.9,1.5l-4.3,5.6c-0.3,0.3-0.7,0.4-1.1,0.1c-0.1,0-0.1-0.1-0.1-0.1l-4.3-5.6c0.6-0.3,0.9-0.9,0.9-1.6v-3.3  c0-0.2-0.1-0.3-0.2-0.4c-1.5-1.2-2.5-2.9-2.9-4.7l-0.3-3.3v0l0-2.5C37.6,36,37.9,35.6,38.3,35.6z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgFriends);\nexport default __webpack_public_path__ + \"static/media/friends.67a3b7dd.svg\";\nexport { ForwardRef as ReactComponent };","var _defs, _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSettings(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    height: \"100px\",\n    width: \"100px\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlSpace: \"preserve\",\n    style: {\n      shapeRendering: \"geometricPrecision\",\n      textRendering: \"geometricPrecision\",\n      imageRendering: \"optimizeQuality\"\n    },\n    viewBox: \"0 0 2540 2540\",\n    x: \"0px\",\n    y: \"0px\",\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null)), _g || (_g = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    className: \"fil0\",\n    d: \"M326 514c0,-34 28,-63 63,-63 35,0 63,29 63,63l0 7c106,29 180,125 180,235 0,110 -75,206 -180,234l0 1036c0,34 -28,63 -63,63 -35,0 -63,-29 -63,-63l0 -1036c-105,-28 -180,-124 -180,-234 0,-110 74,-206 180,-235l0 -7zm63 125c-64,0 -116,52 -116,117 0,64 52,116 116,116 65,0 117,-51 117,-116 0,-65 -52,-117 -117,-117z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"fil0\",\n    d: \"M913 514c0,-34 29,-63 63,-63 35,0 64,29 64,63l0 246c105,29 179,125 179,235 0,110 -74,206 -179,234l0 797c0,34 -29,63 -64,63 -34,0 -63,-29 -63,-63l0 -797c-105,-28 -179,-124 -179,-234 0,-110 74,-206 179,-235l0 -246zm63 364c-64,0 -116,52 -116,117 0,64 52,116 116,116 65,0 117,-51 117,-116 0,-65 -52,-117 -117,-117z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"fil0\",\n    d: \"M2088 514c0,-34 28,-63 63,-63 35,0 63,29 63,63l0 256c105,28 180,124 180,234 0,110 -75,206 -180,235l0 787c0,34 -28,63 -63,63 -35,0 -63,-29 -63,-63l0 -787c-105,-29 -180,-125 -180,-235 0,-110 74,-206 180,-234l0 -256zm63 374c-65,0 -117,52 -117,116 0,65 52,117 117,117 65,0 116,-52 116,-117 0,-64 -52,-116 -116,-116z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"fil0\",\n    d: \"M1500 514c0,-34 29,-63 64,-63 34,0 63,29 63,63l0 517c105,29 179,125 179,235 0,110 -74,206 -179,234l0 526c0,34 -29,63 -63,63 -35,0 -64,-29 -64,-63l0 -526c-105,-28 -179,-124 -179,-234 0,-110 74,-206 179,-235l0 -517zm64 635c-65,0 -117,53 -117,117 0,65 52,116 117,116 64,0 116,-52 116,-116 0,-65 -52,-117 -116,-117z\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSettings);\nexport default __webpack_public_path__ + \"static/media/settings.00cc73c3.svg\";\nexport { ForwardRef as ReactComponent };","\r\n/** @jsxImportSource @emotion/react */\r\n// Layout\r\nimport { useTheme } from '@mui/styles';\r\nimport { Grid, Typography } from '@mui/material';\r\nimport { ReactComponent as ChannelIcon } from './icons/channel.svg';\r\nimport { ReactComponent as FriendsIcon } from './icons/friends.svg';\r\nimport { ReactComponent as SettingsIcon } from './icons/settings.svg';\r\n\r\nconst useStyles = (theme) => ({\r\n  root: {\r\n    height: '100%',\r\n    flex: '1 1 auto',\r\n    display: 'flex',\r\n    // background: 'rgba(0,0,0,.2)',\r\n  },\r\n  card: {\r\n    textAlign: 'center',\r\n  },\r\n  icon: {\r\n    width: '30%',\r\n    fill: '#fff',\r\n  }\r\n})\r\n\r\nexport default function Welcome() {\r\n  const styles = useStyles(useTheme())\r\n  return (\r\n    <div css={styles.root}>\r\n      <Grid\r\n        container\r\n        direction=\"row\"\r\n        justify=\"center\"\r\n        alignItems=\"center\"\r\n        spacing={5}\r\n      >\r\n        <Grid item xs>\r\n          <div css={styles.card}>\r\n            <ChannelIcon css={styles.icon} />\r\n            <Typography color=\"textPrimary\">\r\n              Create channels\r\n            </Typography>\r\n          </div>\r\n        </Grid>\r\n        <Grid item xs>\r\n          <div css={styles.card}>\r\n            <FriendsIcon css={styles.icon} />\r\n            <Typography color=\"textPrimary\">\r\n              Invite friends\r\n            </Typography>\r\n          </div>\r\n        </Grid>\r\n        <Grid item xs>\r\n          <div css={styles.card}>\r\n            <SettingsIcon css={styles.icon} />\r\n            <Typography color=\"textPrimary\">\r\n              Settings\r\n            </Typography>\r\n          </div>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n","\r\n/** @jsxImportSource @emotion/react */\r\nimport {useContext} from 'react'\r\n// Layout\r\nimport { useTheme } from '@mui/styles';\r\nimport useMediaQuery from '@mui/material/useMediaQuery';\r\nimport { Drawer } from '@mui/material';\r\n// Local\r\nimport Context from './Context'\r\nimport Channels from './Channels'\r\nimport Channel from './Channel'\r\nimport Welcome from './Welcome'\r\nimport {\r\n  Route,\r\n  Routes,\r\n} from 'react-router-dom'\r\n\r\nconst useStyles = (theme) => ({\r\n  root: {\r\n    backgroundColor: '#373B44',\r\n    overflow: 'hidden',\r\n    flex: '1 1 auto',\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    position: 'relative',\r\n  },\r\n  drawer: {\r\n    width: '200px',\r\n    display: 'none',\r\n  },\r\n  drawerVisible: {\r\n    display: 'block',\r\n  },\r\n})\r\n\r\nexport default function Main() {\r\n  const {\r\n    // currentChannel, not yet used\r\n    drawerVisible,\r\n  } = useContext(Context)\r\n  \r\n  const theme = useTheme()\r\n  const styles = useStyles(theme)\r\n  const alwaysOpen = useMediaQuery(theme.breakpoints.up('sm'))\r\n  const isDrawerVisible = alwaysOpen || drawerVisible\r\n  return (\r\n    <main css={styles.root}>\r\n      <Drawer\r\n        PaperProps={{ style: { position: 'relative' } }}\r\n        BackdropProps={{ style: { position: 'relative' } }}\r\n        ModalProps={{\r\n          style: { position: 'relative' }\r\n        }}\r\n        variant=\"persistent\"\r\n        open={isDrawerVisible}\r\n        css={[styles.drawer, isDrawerVisible && styles.drawerVisible]}\r\n      >\r\n        <Channels />\r\n      </Drawer>\r\n      <Routes>\r\n        <Route path=\":id\" element={<Channel />}/>\r\n        <Route path=\"*\" element={<Welcome />}/>\r\n      </Routes>\r\n    </main>\r\n  );\r\n}\r\n","\r\n/** @jsxImportSource @emotion/react */\r\nimport { useContext, useEffect } from 'react';\r\nimport { useCookies } from 'react-cookie';\r\nimport crypto from 'crypto'\r\nimport qs from 'qs'\r\nimport axios from 'axios'\r\n// Layout\r\nimport { useTheme } from '@mui/styles';\r\nimport { Link } from '@mui/material';\r\n// Local\r\nimport Context from './Context'\r\nimport {\r\n  useNavigate\r\n} from \"react-router-dom\";\r\n\r\nconst base64URLEncode = (str) => {\r\n  return str.toString('base64')\r\n    .replace(/\\+/g, '-')\r\n    .replace(/\\//g, '_')\r\n    .replace(/=/g, '');\r\n}\r\n\r\nconst sha256 = (buffer) => {\r\n  return crypto\r\n    .createHash('sha256')\r\n    .update(buffer)\r\n    .digest()\r\n}\r\n\r\nconst useStyles = (theme) => ({\r\n  root: {\r\n    flex: '1 1 auto',\r\n    background: theme.palette.background.default,\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    '& > div': {\r\n      margin: `${theme.spacing(1)}`,\r\n      marginLeft: 'auto',\r\n      marginRight: 'auto',\r\n    },\r\n    '& fieldset': {\r\n      border: 'none',\r\n      '& label': {\r\n        marginBottom: theme.spacing(.5),\r\n        display: 'block',\r\n      },\r\n    },\r\n  },\r\n})\r\n\r\nconst Redirect = ({\r\n  config,\r\n  codeVerifier,\r\n}) => {\r\n  const styles = useStyles(useTheme())\r\n  const redirect = (e) => {\r\n    e.stopPropagation()\r\n    const code_challenge = base64URLEncode(sha256(codeVerifier))\r\n    const url = [\r\n      `${config.authorization_endpoint}?`,\r\n      `client_id=${config.client_id}&`,\r\n      `scope=${config.scope}&`,\r\n      `response_type=code&`,\r\n      `redirect_uri=${config.redirect_uri}&`,\r\n      `code_challenge=${code_challenge}&`,\r\n      `code_challenge_method=S256`,\r\n    ].join('')\r\n    window.location = url\r\n  }\r\n  return (\r\n    <div css={styles.root}>\r\n      <Link onClick={redirect} color=\"secondary\">Login with OpenID Connect and OAuth2</Link>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Tokens = ({\r\n  oauth\r\n}) => {\r\n  const {setOauth} = useContext(Context)\r\n  const styles = useStyles(useTheme())\r\n  const {id_token} = oauth\r\n  const id_payload = id_token.split('.')[1]\r\n  const {email} = JSON.parse(atob(id_payload))\r\n  const logout = (e) => {\r\n    e.stopPropagation()\r\n    setOauth(null)\r\n  }\r\n  return (\r\n    <div css={styles.root}>\r\n      Welcome {email} <Link onClick={logout} color=\"secondary\">logout</Link>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst LoadToken = ({\r\n  code,\r\n  codeVerifier,\r\n  config,\r\n  removeCookie,\r\n  setOauth\r\n}) => {\r\n  const styles = useStyles(useTheme())\r\n  const navigate = useNavigate();\r\n  useEffect( () => {\r\n    const fetch = async () => {\r\n      try {\r\n        const {data} = await axios.post(\r\n          config.token_endpoint\r\n        , qs.stringify ({\r\n          grant_type: 'authorization_code',\r\n          client_id: `${config.client_id}`,\r\n          code_verifier: `${codeVerifier}`,\r\n          redirect_uri: `${config.redirect_uri}`,\r\n          code: `${code}`,\r\n        }))\r\n        removeCookie('code_verifier')\r\n        setOauth(data)\r\n        navigate('/')\r\n      }catch (err) {\r\n        console.error(err)\r\n      }\r\n    }\r\n    fetch()\r\n  })\r\n  return (\r\n    <div css={styles.root}>Loading tokens</div>\r\n  )\r\n}\r\n\r\nexport default function Login({\r\n  onUser\r\n}) {\r\n  const styles = useStyles(useTheme());\r\n  // const location = useLocation();\r\n  const [cookies, setCookie, removeCookie] = useCookies([]);\r\n  const {oauth, setOauth} = useContext(Context)\r\n  const config = {\r\n    authorization_endpoint: 'http://localhost:5556/dex/auth',\r\n    token_endpoint: 'http://localhost:5556/dex/token',\r\n    client_id: 'webtech-frontend',\r\n    redirect_uri: 'http://localhost:3000',\r\n    scope: 'openid%20email%20offline_access',\r\n  }\r\n  const params = new URLSearchParams(window.location.search)\r\n  const code = params.get('code')\r\n  // is there a code query parameters in the url \r\n  if(!code){ // no: we are not being redirected from an oauth server\r\n    if(!oauth){\r\n      const codeVerifier = base64URLEncode(crypto.randomBytes(32))\r\n      console.log('set code_verifier', codeVerifier)\r\n      setCookie('code_verifier', codeVerifier)\r\n      return (\r\n        <Redirect codeVerifier={codeVerifier} config={config} css={styles.root} />\r\n      )\r\n    }else{ // yes: user is already logged in, great, is is working\r\n      return (\r\n        <Tokens oauth={oauth} css={styles.root} />\r\n      )\r\n    }\r\n  }else{ // yes: we are coming from an oauth server\r\n    console.log('get code_verifier', cookies.code_verifier)\r\n    return (\r\n      <LoadToken\r\n        code={code}\r\n        codeVerifier={cookies.code_verifier}\r\n        config={config}\r\n        setOauth={setOauth}\r\n        removeCookie={removeCookie} />\r\n    )\r\n  }\r\n}\r\n","\r\n/** @jsxImportSource @emotion/react */\r\nimport { useContext, useState } from 'react'\r\n// Local\r\nimport Oups from './Oups'\r\nimport Footer from './Footer'\r\nimport Header from './Header'\r\nimport Main from './Main'\r\nimport Login from './Login'\r\nimport Context from './Context'\r\n// Rooter\r\nimport {\r\n  Route,\r\n  Routes,\r\n  Navigate,\r\n  useLocation\r\n} from \"react-router-dom\"\r\n\r\nconst styles = {\r\n  root: {\r\n    boxSizing: 'border-box',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    backgroundColor: '#565E71',\r\n    padding: '50px',\r\n  },\r\n}\r\n\r\nexport default function App() {\r\n  const location = useLocation()\r\n  const {oauth} = useContext(Context)\r\n  const [drawerMobileVisible, setDrawerMobileVisible] = useState(false)\r\n  const drawerToggleListener = () => {\r\n    setDrawerMobileVisible(!drawerMobileVisible)\r\n  }\r\n  const gochannels = (<Navigate\r\n    to={{\r\n      pathname: \"/channels\",\r\n      state: { from: location }\r\n    }}\r\n  />)\r\n  const gohome = (<Navigate\r\n    to={{\r\n      pathname: \"/\",\r\n      state: { from: location }\r\n    }}\r\n  />)\r\n  return (\r\n    <div className=\"App\" css={styles.root}>\r\n      <Header drawerToggleListener={drawerToggleListener}/>\r\n      <Routes>\r\n        <Route exact path=\"/\" element={oauth ? (gochannels) : (<Login />)}/>\r\n        <Route path=\"/channels/*\" element={oauth ? (<Main />) : (gohome)}/>\r\n        <Route path=\"/Oups\" element={<Oups />} />\r\n      </Routes>\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { CookiesProvider } from 'react-cookie';\r\nimport './index.css';\r\nimport App from './App';\r\nimport { Provider as ContextProvider } from './Context';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport 'typeface-roboto'\r\n// Layout\r\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\r\nimport {\r\n  BrowserRouter as Router,\r\n} from \"react-router-dom\";\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    mode: 'dark',\r\n  }\r\n});\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <ContextProvider>\r\n      <CookiesProvider>\r\n        <ThemeProvider theme={theme}>\r\n          <Router>\r\n            <App />\r\n          </Router>\r\n        </ThemeProvider>\r\n      </CookiesProvider>\r\n    </ContextProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}