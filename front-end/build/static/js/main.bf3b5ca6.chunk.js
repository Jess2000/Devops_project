(this["webpackJsonpwebtech-front-end"]=this["webpackJsonpwebtech-front-end"]||[]).push([[0],{25:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var c=n(11),r=n(0),a=n.n(r),o=n(401),i=n(2),l=a.a.createContext();t.b=l;var s=function(t){var n=t.children,a=Object(o.a)([]),s=Object(c.a)(a,3),u=s[0],d=s[1],b=s[2],f=Object(r.useState)(u.oauth),h=Object(c.a)(f,2),p=h[0],O=h[1],j=Object(r.useState)(!1),v=Object(c.a)(j,2),m=v[0],g=v[1],x=Object(r.useState)([]),w=Object(c.a)(x,2),y=w[0],k=w[1],C=Object(r.useState)(null),E=Object(c.a)(C,2),S=E[0],_=E[1];return Object(i.jsx)(l.Provider,{value:{oauth:p,setOauth:function(t){if(t){var n=JSON.parse(e.from(t.id_token.split(".")[1],"base64").toString("utf-8"));t.email=n.email,d("oauth",t)}else _(null),k([]),b("oauth");O(t)},channels:y,drawerVisible:m,setDrawerVisible:g,setChannels:k,currentChannel:S,setCurrentChannel:function(e){var t=y.find((function(t){return t.id===e}));_(t)}},children:n})}}).call(this,n(22).Buffer)},255:function(e,t,n){},284:function(e,t){},286:function(e,t){},296:function(e,t){},298:function(e,t){},325:function(e,t){},327:function(e,t){},328:function(e,t){},333:function(e,t){},335:function(e,t){},341:function(e,t){},343:function(e,t){},362:function(e,t){},374:function(e,t){},377:function(e,t){},389:function(e,t){},392:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(55),o=n.n(a),i=n(443),l=(n(255),n(11)),s=n(393),u=n(6);function d(){var e={root:{background:Object(s.a)().palette.background.default,overflow:"hidden",flex:"1 1 auto",display:"flex",justifyContent:"center",alignItems:"center"}};return Object(u.a)("main",{css:e.root,children:Object(u.a)("div",{children:"An unexpected error occured, it is probably not your fault. Sorry."})})}var b={footer:{height:"30px",backgroundColor:"rgba(255,255,255,.3)",flexShrink:0}};function f(){return Object(u.a)("footer",{style:b.footer,children:"footer"})}var h=n(4),p=n(457),O=n(456),j=n(228),v=n.n(j),m=n(25);function g(e){e.drawerToggleListener;var t,n={header:{padding:(t=Object(s.a)()).spacing(1),backgroundColor:"rgba(255,255,255,.3)",flexShrink:0},headerLogIn:{backgroundColor:"red"},headerLogOut:{backgroundColor:"blue"},menu:Object(h.a)({},t.breakpoints.up("sm"),{display:"none !important"})},r=Object(c.useContext)(m.b),a=r.oauth,o=r.setOauth,i=r.drawerVisible,l=r.setDrawerVisible;return Object(u.b)("header",{css:n.header,children:[Object(u.a)(p.a,{color:"inherit","aria-label":"open drawer",onClick:function(e){l(!i)},css:n.menu,children:Object(u.a)(v.a,{})}),"Header",a?Object(u.b)("span",{children:[a.email,Object(u.a)(O.a,{onClick:function(e){e.stopPropagation(),o(null)},children:"logout"})]}):Object(u.a)("span",{children:"new user"})]})}var x=n(442),w=n(450),y=n(51),k=n(37),C=n.n(k),E=n(52),S=n.n(E),_=n(45),M=n(18),P={root:{"& a":{padding:".2rem .5rem",whiteSpace:"nowrap"}}};function I(){var e=Object(c.useContext)(m.b),t=e.oauth,n=e.channels,r=e.setChannels,a=Object(M.g)();return Object(c.useEffect)((function(){var e=function(){var e=Object(y.a)(C.a.mark((function e(){var n,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("http://localhost:3001/channels",{headers:{Authorization:"Bearer ".concat(t.access_token)}});case 3:n=e.sent,c=n.data,r(c),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[t,r]),Object(u.b)("ul",{css:P.root,children:[Object(u.a)("li",{css:P.channel,children:Object(u.a)(O.a,{to:"/channels",component:_.b,children:"Welcome"})}),n.map((function(e,t){return Object(u.a)("li",{css:P.channel,children:Object(u.a)(O.a,{href:"/channels/".concat(e.id),onClick:function(t){t.preventDefault(),a("/channels/".concat(e.id))},children:e.name})},t)}))]})}var z=n(15),V=n(454),A=n(235),Z=n.n(A),R=n(445),L=n(449),D=n(229),B=n.n(D);function H(e){var t=e.addMessage,n=e.channel,r=Object(c.useState)(""),a=Object(l.a)(r,2),o=a[0],i=a[1],d=function(e){var t="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{form:{borderTop:"2px solid ".concat(t),padding:".5rem",display:"flex"},content:{flex:"1 1 auto","&.MuiTextField-root":{marginRight:e.spacing(1)}},send:{}}}(Object(s.a)()),b=function(){var e=Object(y.a)(C.a.mark((function e(){var c,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post("http://localhost:3001/channels/".concat(n.id,"/messages"),{content:o,author:"david"});case 2:c=e.sent,r=c.data,t(r),i("");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.b)("form",{css:d.form,onSubmit:b,noValidate:!0,children:[Object(u.a)(R.a,{id:"outlined-multiline-flexible",label:"Message",multiline:!0,maxRows:4,value:o,onChange:function(e){i(e.target.value)},variant:"outlined",css:d.content}),Object(u.a)("div",{children:Object(u.a)(L.a,{variant:"contained",color:"primary",css:d.send,endIcon:Object(u.a)(B.a,{}),onClick:b,children:"Send"})})]})}var T=n(446),N=n(237),W=n(444),J=n(238),Y=n(89),X=n.n(Y),U=n(230),F=n.n(U),Q=n(231),$=n.n(Q);X.a.extend(F.a),X.a.extend($.a),X.a.updateLocale("en",{calendar:{sameElse:"DD/MM/YYYY hh:mm A"}});var q=Object(c.forwardRef)((function(e,t){var n=e.channel,r=e.messages,a=e.onScrollDown,o=(Object(s.a)(),{root:{position:"relative",flex:"1 1 auto",overflow:"auto","& ul":{margin:0,padding:0,textIndent:0,listStyleType:0}},message:{padding:".2rem .5rem",":hover":{backgroundColor:"rgba(255,255,255,.05)"}},fabWrapper:{position:"absolute",right:0,top:0,width:"50px"},fab:{position:"fixed !important",top:0,width:"50px"}});Object(c.useImperativeHandle)(t,(function(){return{scroll:d}}));var i=Object(c.useRef)(null),l=Object(c.useRef)(null),d=function(){l.current.scrollIntoView()},b=Object(c.useRef)(null);return Object(c.useLayoutEffect)((function(){var e=i.current,t=function(){null===b.current&&(b.current=setTimeout((function(){b.current=null;var t=e.scrollTop,n=e.offsetHeight,c=e.scrollHeight;a(t+n<c)}),200))};return t(),e.addEventListener("scroll",t),function(){return e.removeEventListener("scroll",t)}})),Object(u.b)("div",{css:o.root,ref:i,children:[Object(u.b)("h1",{children:["Messages for ",n.name]}),Object(u.a)("ul",{children:r.map((function(e,t){var n=Object(T.a)().use(N.a).use(W.a).use(J.a).processSync(e.content).value;return Object(u.b)("li",{css:o.message,children:[Object(u.b)("p",{children:[Object(u.a)("span",{children:e.author})," - ",Object(u.a)("span",{children:X()().calendar(e.creation)})]}),Object(u.a)("div",{dangerouslySetInnerHTML:{__html:n}})]},t)}))}),Object(u.a)("div",{ref:l})]})}));function G(){var e,t=Object(M.g)(),n=Object(M.h)().id,r=Object(c.useContext)(m.b),a=r.channels,o=r.oauth,i=a.find((function(e){return e.id===n})),d={root:{height:"100%",flex:"1 1 auto",display:"flex",flexDirection:"column",position:"relative",overflowX:"auto"},fab:{position:"absolute !important",top:(e=Object(s.a)()).spacing(2),right:e.spacing(2)},fabDisabled:{display:"none !important"}},b=Object(c.useRef)(),f=Object(c.useState)([]),h=Object(l.a)(f,2),p=h[0],O=h[1],j=Object(c.useState)(!1),v=Object(l.a)(j,2),g=v[0],x=v[1];Object(c.useEffect)((function(){var e=function(){var e=Object(y.a)(C.a.mark((function e(){var c,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("http://localhost:3001/channels/".concat(n,"/messages"),{headers:{}});case 3:c=e.sent,r=c.data,O(r),b.current&&b.current.scroll(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t("/oups");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[n,o,t]);return i?Object(u.b)("div",{css:d.root,children:[Object(u.a)(q,{channel:i,messages:p,onScrollDown:function(e){x(e)},ref:b}),Object(u.a)(H,{addMessage:function(e){O([].concat(Object(z.a)(p),[e]))},channel:i}),Object(u.a)(V.a,{color:"primary","aria-label":"Latest messages",css:[d.fab,g||d.fabDisabled],onClick:function(){b.current.scroll()},children:Object(u.a)(Z.a,{})})]}):Object(u.a)("div",{children:"loading"})}var K,ee,te,ne,ce,re,ae,oe,ie,le,se=n(452),ue=n(455),de=["title","titleId"];function be(){return be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},be.apply(this,arguments)}function fe(e,t){if(null==e)return{};var n,c,r=function(e,t){if(null==e)return{};var n,c,r={},a=Object.keys(e);for(c=0;c<a.length;c++)n=a[c],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(c=0;c<a.length;c++)n=a[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function he(e,t){var n=e.title,r=e.titleId,a=fe(e,de);return c.createElement("svg",be({height:"100px",width:"100px",fill:"#000000",xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",viewBox:"0 0 100 100",x:"0px",y:"0px",ref:t,"aria-labelledby":r},a),void 0===n?c.createElement("title",{id:r},"74 all"):n?c.createElement("title",{id:r},n):null,K||(K=c.createElement("path",{d:"M36.39,39.39V60.61a3,3,0,0,0,3,3H60.61a3,3,0,0,0,3-3V39.39a3,3,0,0,0-3-3H39.39A3,3,0,0,0,36.39,39.39Zm6,3H57.61V57.61H42.39Z"})),ee||(ee=c.createElement("path",{d:"M53,28.71V19.42a9.46,9.46,0,1,0-6,0v9.29ZM50,7a3.46,3.46,0,1,1-3.46,3.46A3.46,3.46,0,0,1,50,7Z"})),te||(te=c.createElement("path",{d:"M47,71.29v9.29a9.46,9.46,0,1,0,6,0V71.29ZM50,93a3.46,3.46,0,1,1,3.46-3.46A3.46,3.46,0,0,1,50,93Z"})),ne||(ne=c.createElement("path",{d:"M67.18,37.07l6.57-6.57a9.46,9.46,0,1,0-4.24-4.24l-6.57,6.57Zm8.34-17.47a3.46,3.46,0,1,1,0,4.89A3.45,3.45,0,0,1,75.52,19.59Z"})),ce||(ce=c.createElement("path",{d:"M32.82,62.93,26.26,69.5a9.44,9.44,0,0,0-10.9,1.77h0A9.46,9.46,0,1,0,30.5,73.74l6.57-6.57ZM24.48,80.41a3.46,3.46,0,1,1-4.89-4.89h0a3.46,3.46,0,0,1,4.89,4.89Z"})),re||(re=c.createElement("path",{d:"M84.65,71.27A9.44,9.44,0,0,0,73.74,69.5l-6.57-6.57-4.24,4.24,6.57,6.57a9.47,9.47,0,0,0,1.77,10.9h0A9.46,9.46,0,0,0,84.65,71.27Zm-4.24,9.13a3.46,3.46,0,0,1-4.89-4.89,3.54,3.54,0,0,1,4.89,0A3.46,3.46,0,0,1,80.41,80.41Z"})),ae||(ae=c.createElement("path",{d:"M28.73,15.35A9.46,9.46,0,1,0,26.25,30.5l6.57,6.57,4.24-4.24L30.5,26.26a9.44,9.44,0,0,0-1.77-10.91Zm-9.13,9.13a3.46,3.46,0,0,1,4.89-4.89h0a3.46,3.46,0,1,1-4.89,4.89Z"})),oe||(oe=c.createElement("path",{d:"M89.54,40.54a9.47,9.47,0,0,0-9,6.46H71.29v6h9.29a9.45,9.45,0,1,0,9-12.46Zm0,12.92A3.46,3.46,0,1,1,93,50,3.46,3.46,0,0,1,89.54,53.46Z"})),ie||(ie=c.createElement("path",{d:"M1,50a9.45,9.45,0,0,0,18.42,3h9.29V47H19.42A9.45,9.45,0,0,0,1,50Zm12.92,0a3.46,3.46,0,1,1-3.46-3.46A3.46,3.46,0,0,1,13.91,50Z"})),le||(le=c.createElement("rect",{x:45.75,y:47,width:8.5,height:6})))}var pe,Oe,je,ve=c.forwardRef(he),me=(n.p,["title","titleId"]);function ge(){return ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},ge.apply(this,arguments)}function xe(e,t){if(null==e)return{};var n,c,r=function(e,t){if(null==e)return{};var n,c,r={},a=Object.keys(e);for(c=0;c<a.length;c++)n=a[c],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(c=0;c<a.length;c++)n=a[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function we(e,t){var n=e.title,r=e.titleId,a=xe(e,me);return c.createElement("svg",ge({height:"100px",width:"100px",fill:"#000000",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 90 90",style:{enableBackground:"new 0 0 90 90"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?c.createElement("title",{id:r},n):null,pe||(pe=c.createElement("path",{d:"M22.3,64.2c0-6.9,3.2-11.7,9.6-14.4c-0.5-0.8-0.9-1.6-1.3-2.5c-0.7-0.3-1.3-0.5-1.9-0.6v-1.4c0.5-0.6,0.9-1.3,1.2-2  c0-0.8,0.1-1.5,0.3-2.3l1.9-8.2c0,0,0-0.1,0-0.1c0-0.1,0.1-0.3,0.1-0.4c0.7-4,0.3-6.9-1-8.6c-0.5-0.7-1.3-1.2-2.1-1.4  c-0.7-1.1-1.7-2-2.8-2.6c-1.8-1-3.8-1.5-5.9-1.3c-0.8,0-1.6,0.2-2.4,0.4c-0.9,0.3-1.8,0.8-2.6,1.3c-1,0.6-1.8,1.4-2.6,2.2  c-1.4,1.4-2.4,3.1-2.9,5c-0.4,1.5-0.4,3.1,0,4.7l0,0.2c0,0.1,0.1,0.3,0.1,0.5c-1.1,1.5-0.7,3.6-0.3,5c0.2,0.8,0.7,2.5,1.7,3.5  c0.4,1.4,1.1,2.8,2,3.9v1.4c-4,0.9-13.1,5.5-13.1,12.8c0,3.1,5.5,5.8,13.2,6.9c2.2,0.3,4.4,0.4,6.6,0.4l1.9,0c0.3,0,0.6,0,0.9,0  C22.6,66,22.3,65.1,22.3,64.2z M19.7,53.5l-3.1-3.3v-5.7c-1.4-1.4-2.2-3.1-2.4-4.6c0-0.2-0.2-0.4-0.4-0.4c0,0-0.5-0.1-1.1-2.4  c-0.5-1.8-0.2-2.3-0.2-2.5c0.1-0.1,0.2-0.1,0.3-0.1h0.1c0.1,0,0.2,0,0.3-0.1c0.1-0.1,0.2-0.2,0.2-0.3c0,0,0.3-3.8,2.5-5.1  c1.1-0.7,2.5-0.6,4.1,0.1c3.6,1.5,6.2,1.4,7.8,1.1c1.6,1.3,1.1,3.3,1,3.7v0c-0.1,0.2,0,0.3,0.1,0.5c0.1,0.1,0.3,0.2,0.4,0.2  c0.2,0,0.3,0,0.4,0.1c0.1,0.1,0.4,0.7-0.2,2.5c-0.7,2.3-1.2,2.4-1.2,2.4c-0.2,0-0.4,0.2-0.4,0.4c-0.2,1.5-1.1,3.3-2.4,4.6v5.7  l-3.1,3.3C21.7,54.3,20.4,54.3,19.7,53.5z"})),Oe||(Oe=c.createElement("path",{d:"M76.6,46.7v-1.4c0.9-1.2,1.5-2.5,2-3.9c1-1.1,1.5-2.7,1.7-3.5c0.4-1.4,0.8-3.5-0.3-5.1c0-0.1,0.1-0.3,0.1-0.4  c0.7-4,0.3-6.9-1-8.6c-0.5-0.7-1.3-1.2-2.1-1.4c-0.7-1.1-1.7-2-2.8-2.6c-1.8-1-3.8-1.5-5.9-1.3c-0.8,0-1.6,0.2-2.4,0.4  c-0.9,0.3-1.8,0.8-2.6,1.3c-1,0.6-1.8,1.4-2.6,2.2c-1.4,1.4-2.4,3.1-2.9,5c-0.4,1.5-0.4,3.1,0,4.7l0,0.1l2.1,8.8  c0.2,0.8,0.3,1.6,0.3,2.4c0.3,0.7,0.7,1.3,1.2,1.9v1.4c-0.5,0.1-1.2,0.3-1.8,0.6c-0.3,0.9-0.8,1.8-1.3,2.6c6.3,2.8,9.6,7.7,9.6,14.3  c0,0.9-0.3,1.8-0.7,2.6c0.4,0,0.7,0,1.1,0l1.9,0c2.2,0,4.4-0.1,6.6-0.4c7.7-1.1,13.1-3.7,13.1-6.8C89.7,52.2,80.6,47.6,76.6,46.7z   M76.3,39.4c-0.2,0-0.4,0.2-0.4,0.4c-0.2,1.5-1.1,3.3-2.4,4.6v5c0,2.5-2,4.5-4.5,4.5c-2.5,0-4.5-2-4.5-4.5v-5  c-1.4-1.4-2.2-3.1-2.4-4.6c0-0.2-0.2-0.4-0.4-0.4c0,0-0.5-0.1-1.1-2.4c-0.5-1.8-0.2-2.3-0.2-2.5c0.1-0.1,0.2-0.1,0.3-0.1h0.1  c0.1,0,0.2,0,0.3-0.1c0.1-0.1,0.2-0.2,0.2-0.3c0,0,0.3-3.8,2.5-5.1c1.1-0.7,2.5-0.6,4.1,0.1c3.6,1.5,6.2,1.4,7.8,1.1  c1.6,1.3,1.1,3.3,1,3.7v0c-0.1,0.2,0,0.3,0.1,0.5c0.1,0.1,0.3,0.2,0.4,0.2c0.2,0,0.3,0,0.4,0.1c0.1,0.1,0.4,0.7-0.2,2.5  C76.8,39.3,76.3,39.4,76.3,39.4z"})),je||(je=c.createElement("path",{d:"M54.7,50.7c2.7-2.2,4-5.8,3.2-9.2l-2.1-9.1c-1.2-6-7.1-9.8-13-8.5c-4.3,0.9-7.6,4.2-8.5,8.5l-2.1,9.1  c-0.8,3.4,0.4,7,3.1,9.2c-4.4,1.3-11,4.3-11,13.5c0,4.1,9.3,7.4,20.8,7.4s20.8-3.3,20.8-7.4C65.8,55.3,59.2,52,54.7,50.7z   M38.3,35.6C38.4,35.6,38.4,35.6,38.3,35.6c1.7,0.1,5-0.2,8.7-3.5c0.3-0.3,0.8-0.2,1.1,0.1c0,0,0.1,0.1,0.1,0.1  c0.9,1.4,2.2,2.6,3.7,3.3c0.3,0.2,0.5,0.5,0.5,0.8l-0.1,4.1c-0.1,2.5-1.2,4.8-3.1,6.4c-0.1,0.1-0.2,0.3-0.2,0.4v3.3  c0,0.6,0.4,1.2,0.9,1.5l-4.3,5.6c-0.3,0.3-0.7,0.4-1.1,0.1c-0.1,0-0.1-0.1-0.1-0.1l-4.3-5.6c0.6-0.3,0.9-0.9,0.9-1.6v-3.3  c0-0.2-0.1-0.3-0.2-0.4c-1.5-1.2-2.5-2.9-2.9-4.7l-0.3-3.3v0l0-2.5C37.6,36,37.9,35.6,38.3,35.6z"})))}var ye,ke,Ce=c.forwardRef(we),Ee=(n.p,["title","titleId"]);function Se(){return Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},Se.apply(this,arguments)}function _e(e,t){if(null==e)return{};var n,c,r=function(e,t){if(null==e)return{};var n,c,r={},a=Object.keys(e);for(c=0;c<a.length;c++)n=a[c],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(c=0;c<a.length;c++)n=a[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Me(e,t){var n=e.title,r=e.titleId,a=_e(e,Ee);return c.createElement("svg",Se({height:"100px",width:"100px",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",style:{shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"optimizeQuality"},viewBox:"0 0 2540 2540",x:"0px",y:"0px",fillRule:"evenodd",clipRule:"evenodd",ref:t,"aria-labelledby":r},a),n?c.createElement("title",{id:r},n):null,ye||(ye=c.createElement("defs",null)),ke||(ke=c.createElement("g",null,c.createElement("path",{className:"fil0",d:"M326 514c0,-34 28,-63 63,-63 35,0 63,29 63,63l0 7c106,29 180,125 180,235 0,110 -75,206 -180,234l0 1036c0,34 -28,63 -63,63 -35,0 -63,-29 -63,-63l0 -1036c-105,-28 -180,-124 -180,-234 0,-110 74,-206 180,-235l0 -7zm63 125c-64,0 -116,52 -116,117 0,64 52,116 116,116 65,0 117,-51 117,-116 0,-65 -52,-117 -117,-117z"}),c.createElement("path",{className:"fil0",d:"M913 514c0,-34 29,-63 63,-63 35,0 64,29 64,63l0 246c105,29 179,125 179,235 0,110 -74,206 -179,234l0 797c0,34 -29,63 -64,63 -34,0 -63,-29 -63,-63l0 -797c-105,-28 -179,-124 -179,-234 0,-110 74,-206 179,-235l0 -246zm63 364c-64,0 -116,52 -116,117 0,64 52,116 116,116 65,0 117,-51 117,-116 0,-65 -52,-117 -117,-117z"}),c.createElement("path",{className:"fil0",d:"M2088 514c0,-34 28,-63 63,-63 35,0 63,29 63,63l0 256c105,28 180,124 180,234 0,110 -75,206 -180,235l0 787c0,34 -28,63 -63,63 -35,0 -63,-29 -63,-63l0 -787c-105,-29 -180,-125 -180,-235 0,-110 74,-206 180,-234l0 -256zm63 374c-65,0 -117,52 -117,116 0,65 52,117 117,117 65,0 116,-52 116,-117 0,-64 -52,-116 -116,-116z"}),c.createElement("path",{className:"fil0",d:"M1500 514c0,-34 29,-63 64,-63 34,0 63,29 63,63l0 517c105,29 179,125 179,235 0,110 -74,206 -179,234l0 526c0,34 -29,63 -63,63 -35,0 -64,-29 -64,-63l0 -526c-105,-28 -179,-124 -179,-234 0,-110 74,-206 179,-235l0 -517zm64 635c-65,0 -117,53 -117,117 0,65 52,116 117,116 64,0 116,-52 116,-116 0,-65 -52,-117 -116,-117z"}))))}var Pe=c.forwardRef(Me);n.p;function Ie(){var e=(Object(s.a)(),{root:{height:"100%",flex:"1 1 auto",display:"flex"},card:{textAlign:"center"},icon:{width:"30%",fill:"#fff"}});return Object(u.a)("div",{css:e.root,children:Object(u.b)(se.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:5,children:[Object(u.a)(se.a,{item:!0,xs:!0,children:Object(u.b)("div",{css:e.card,children:[Object(u.a)(ve,{css:e.icon}),Object(u.a)(ue.a,{color:"textPrimary",children:"Create channels"})]})}),Object(u.a)(se.a,{item:!0,xs:!0,children:Object(u.b)("div",{css:e.card,children:[Object(u.a)(Ce,{css:e.icon}),Object(u.a)(ue.a,{color:"textPrimary",children:"Invite friends"})]})}),Object(u.a)(se.a,{item:!0,xs:!0,children:Object(u.b)("div",{css:e.card,children:[Object(u.a)(Pe,{css:e.icon}),Object(u.a)(ue.a,{color:"textPrimary",children:"Settings"})]})})]})})}function ze(){var e=Object(c.useContext)(m.b).drawerVisible,t=Object(s.a)(),n={root:{backgroundColor:"#373B44",overflow:"hidden",flex:"1 1 auto",display:"flex",flexDirection:"row",position:"relative"},drawer:{width:"200px",display:"none"},drawerVisible:{display:"block"}},r=Object(x.a)(t.breakpoints.up("sm"))||e;return Object(u.b)("main",{css:n.root,children:[Object(u.a)(w.a,{PaperProps:{style:{position:"relative"}},BackdropProps:{style:{position:"relative"}},ModalProps:{style:{position:"relative"}},variant:"persistent",open:r,css:[n.drawer,r&&n.drawerVisible],children:Object(u.a)(I,{})}),Object(u.b)(M.d,{children:[Object(u.a)(M.b,{path:":id",element:Object(u.a)(G,{})}),Object(u.a)(M.b,{path:"*",element:Object(u.a)(Ie,{})})]})]})}var Ve=n(401),Ae=n(156),Ze=n.n(Ae),Re=n(236),Le=n.n(Re),De=function(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},Be=function(e){return{root:{flex:"1 1 auto",background:e.palette.background.default,display:"flex",justifyContent:"center",alignItems:"center","& > div":{margin:"".concat(e.spacing(1)),marginLeft:"auto",marginRight:"auto"},"& fieldset":{border:"none","& label":{marginBottom:e.spacing(.5),display:"block"}}}}},He=function(e){var t=e.config,n=e.codeVerifier,c=Be(Object(s.a)());return Object(u.a)("div",{css:c.root,children:Object(u.a)(O.a,{onClick:function(e){e.stopPropagation();var c,r=De((c=n,Ze.a.createHash("sha256").update(c).digest())),a=["".concat(t.authorization_endpoint,"?"),"client_id=".concat(t.client_id,"&"),"scope=".concat(t.scope,"&"),"response_type=code&","redirect_uri=".concat(t.redirect_uri,"&"),"code_challenge=".concat(r,"&"),"code_challenge_method=S256"].join("");window.location=a},color:"secondary",children:"Login with OpenID Connect and OAuth2"})})},Te=function(e){var t=e.oauth,n=Object(c.useContext)(m.b).setOauth,r=Be(Object(s.a)()),a=t.id_token.split(".")[1],o=JSON.parse(atob(a)).email;return Object(u.b)("div",{css:r.root,children:["Welcome ",o," ",Object(u.a)(O.a,{onClick:function(e){e.stopPropagation(),n(null)},color:"secondary",children:"logout"})]})},Ne=function(e){var t=e.code,n=e.codeVerifier,r=e.config,a=e.removeCookie,o=e.setOauth,i=Be(Object(s.a)()),l=Object(M.g)();return Object(c.useEffect)((function(){var e=function(){var e=Object(y.a)(C.a.mark((function e(){var c,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post(r.token_endpoint,Le.a.stringify({grant_type:"authorization_code",client_id:"".concat(r.client_id),code_verifier:"".concat(n),redirect_uri:"".concat(r.redirect_uri),code:"".concat(t)}));case 3:c=e.sent,i=c.data,a("code_verifier"),o(i),l("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();e()})),Object(u.a)("div",{css:i.root,children:"Loading tokens"})};function We(e){e.onUser;var t=Be(Object(s.a)()),n=Object(Ve.a)([]),r=Object(l.a)(n,3),a=r[0],o=r[1],i=r[2],d=Object(c.useContext)(m.b),b=d.oauth,f=d.setOauth,h={authorization_endpoint:"http://localhost:5556/dex/auth",token_endpoint:"http://localhost:5556/dex/token",client_id:"webtech-frontend",redirect_uri:"http://localhost:3000",scope:"openid%20email%20offline_access"},p=new URLSearchParams(window.location.search).get("code");if(p)return console.log("get code_verifier",a.code_verifier),Object(u.a)(Ne,{code:p,codeVerifier:a.code_verifier,config:h,setOauth:f,removeCookie:i});if(b)return Object(u.a)(Te,{oauth:b,css:t.root});var O=De(Ze.a.randomBytes(32));return console.log("set code_verifier",O),o("code_verifier",O),Object(u.a)(He,{codeVerifier:O,config:h,css:t.root})}var Je={root:{boxSizing:"border-box",display:"flex",flexDirection:"column",backgroundColor:"#565E71",padding:"50px"}};function Ye(){var e=Object(M.f)(),t=Object(c.useContext)(m.b).oauth,n=Object(c.useState)(!1),r=Object(l.a)(n,2),a=r[0],o=r[1],i=Object(u.a)(M.a,{to:{pathname:"/channels",state:{from:e}}}),s=Object(u.a)(M.a,{to:{pathname:"/",state:{from:e}}});return Object(u.b)("div",{className:"App",css:Je.root,children:[Object(u.a)(g,{drawerToggleListener:function(){o(!a)}}),Object(u.b)(M.d,{children:[Object(u.a)(M.b,{exact:!0,path:"/",element:t?i:Object(u.a)(We,{})}),Object(u.a)(M.b,{path:"/channels/*",element:t?Object(u.a)(ze,{}):s}),Object(u.a)(M.b,{path:"/Oups",element:Object(u.a)(d,{})})]}),Object(u.a)(f,{})]})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(391);var Xe=n(239),Ue=n(451),Fe=n(2),Qe=Object(Xe.a)({palette:{mode:"dark"}});o.a.render(Object(Fe.jsx)(r.a.StrictMode,{children:Object(Fe.jsx)(m.a,{children:Object(Fe.jsx)(i.a,{children:Object(Fe.jsx)(Ue.a,{theme:Qe,children:Object(Fe.jsx)(_.a,{children:Object(Fe.jsx)(Ye,{})})})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[392,1,2]]]);
//# sourceMappingURL=main.bf3b5ca6.chunk.js.map